webpackJsonp([12],{G4wa:function(e,t){},b0Ez:function(e,t){},l4Fe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("teIl"),s=r("utbL"),a=r("TVmP"),i={name:"ForgetPassword",inject:["reload"],data(){return{forgetForm:{name:"",verification:"",password:"",checkPass:""},rules:{name:[{required:!0,validator:(e,t,r)=>{/^[A-Za-z0-9_!@#$%^&]+$/.test(t)?t.length<4||t.length>36?r(new Error("Length between 4 and 36")):r():r(new Error("Numbers, letters, special characters"))},trigger:"blur"}],password:[{required:!0,validator:(e,t,r)=>{console.log("pass"),t.length<6||t.length>36?r(new Error("Length between 6 and 36")):(""!==this.forgetForm.checkPass&&this.$refs.forgetForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{required:!0,validator:(e,t,r)=>{""===t?r(new Error("Confirm password")):t!==this.forgetForm.password?r(new Error("Input same password")):r()},trigger:"blur"}],verification:[{required:!0,validator:(e,t,r)=>{t?r():r(new Error("Input verification code"))},trigger:"blur"}],slide:[{required:!0,validator:(e,t,r)=>{t?r():(this.$alert("Check slide verfication","",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box",callback:e=>{}}),r(new Error("Slide Error")))},trigger:"blur"}]},show:!0,count:"",timer:null}},methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit"),!1;this.axios.post("v1/user/check_reset_password",{user_name:this.forgetForm.name,reset_password:this.forgetForm.verification,password:this.forgetForm.password}).then(e=>{console.log(e.data),1==e.data.result?this.$alert("Successfully",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-check",center:!0,customClass:"success-box",callback:e=>{this.$router.push("login")}}):-1==e.data.result?(console.log(e.data.result),this.$alert("Verification code error","",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box",callback:e=>{this.reload()}})):(console.log(e.data.result),this.$alert("Parameters error","",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box",callback:e=>{this.reload()}}))}).catch(e=>{console.log(e)})})},resetForm(e){this.$refs[e].resetFields()},getCode(){this.axios.post("v1/user/get_reset_password",{user_name:this.forgetForm.name}).then(e=>{console.log(e.data),1==e.data.result?this.$alert("Check your email",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-check",center:!0,customClass:"success-box",callback:e=>{this.timer||(this.count=60,this.show=!1,this.timer=setInterval(()=>{this.count>0&&this.count<=60?this.count--:(this.show=!0,clearInterval(this.timer),this.timer=null)},1e3))}}):this.$alert("Send Email Filure","",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box",callback:e=>{this.reload()}})})},alert(e){console.log(e),"success"==e&&this.$set(this.forgetForm,"slide",!0)}},components:{Header:o.a,Verify:s.a,Footer:a.a}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"forget_password"}},[r("div",{attrs:{id:"upper-part"}},[r("Header",{attrs:{active:"use3"}}),e._v(" "),r("div",{staticClass:"center-panel"},[r("el-row",[r("h2",{staticStyle:{"text-align":"center"}},[e._v("Forget Password")])]),e._v(" "),r("el-form",{ref:"forgetForm",attrs:{"status-icon":"",rules:e.rules,model:e.forgetForm,"label-position":"left","label-width":"160px"}},[r("el-form-item",{attrs:{label:"Name",prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.forgetForm.name,callback:function(t){e.$set(e.forgetForm,"name",t)},expression:"forgetForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"New Password",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.forgetForm.password,callback:function(t){e.$set(e.forgetForm,"password",t)},expression:"forgetForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Confirm",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.forgetForm.checkPass,callback:function(t){e.$set(e.forgetForm,"checkPass",t)},expression:"forgetForm.checkPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Verification",prop:"slide"}},[r("Verify",{attrs:{explain:"Slide to right","show-button":!1,type:3,barSize:{width:"350px",height:"40px"}},on:{success:function(t){return e.alert("success")},error:function(t){return e.alert("error")}}})],1),e._v(" "),r("el-form-item",{staticClass:"verification",attrs:{label:"Verification",prop:"verification"}},[r("div",{staticClass:"verification-content"},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.forgetForm.verification,callback:function(t){e.$set(e.forgetForm,"verification",t)},expression:"forgetForm.verification"}}),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],style:e.forgetForm.slide?{"background-color":"#c04851",color:"#fff"}:{"background-color":"#f6f6f6",color:"#311f1f"},attrs:{disabled:!e.forgetForm.slide},on:{click:e.getCode}},[e._v("\n              Get Code")]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count",attrs:{disabled:""}},[e._v(e._s(e.count)+" s")])],1)]),e._v(" "),r("div",{staticClass:"bottom-row",staticStyle:{"text-align":"center"}},[r("el-button",{staticClass:"button-submit",attrs:{round:"",size:"small"},on:{click:function(t){return e.submitForm("forgetForm")}}},[e._v("Submit")]),e._v(" "),r("el-button",{staticClass:"button-cancel",attrs:{round:"",size:"small"},on:{click:function(t){return e.resetForm("forgetForm")}}},[e._v("Cancel")])],1)],1)],1)],1),e._v(" "),r("Footer",{staticClass:"footer"})],1)},staticRenderFns:[]};var c=r("VU/8")(i,l,!1,function(e){r("b0Ez"),r("G4wa")},"data-v-1271013d",null);t.default=c.exports}});