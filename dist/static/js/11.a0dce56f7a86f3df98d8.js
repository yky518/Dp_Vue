webpackJsonp([11],{Dx6F:function(e,t){},GyR5:function(e,t){},xFoe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("teIl"),r=s("TVmP"),l=s("CzdK"),a={name:"ElementsList",data:()=>({distinct_elements:[],distinct_models:[],author:"",keywords:"",result_details:[],searchForm:{element_selected:[],model_selected:"",authors:"",keywords:""},sort_type:"",pagination:{currentPage:1,count_all:0}}),created(){this.getData()},watch:{$route:{handler(){this.getData()},deep:!0,immediate:!0}},methods:{getData(){let e=this.$route.query.elements,t=new Array;e&&(t=e.split("-")),t.indexOf("")>=0&&t.splice(t.length-1,1),this.searchForm.element_selected=t,this.searchForm.keywords=this.$route.query.keywords,this.searchForm.authors=this.$route.query.authors,this.searchForm.model_selected=this.$route.query.models,this.sort_type=this.$route.query.sort_type?this.$route.query.sort_type:"";let s={elements:t||[],page:this.$route.query.page?parseInt(this.$route.query.page):1,keywords:this.$route.query.keywords?this.$route.query.keywords:"",authors:this.$route.query.authors?this.$route.query.authors:"",models:this.$route.query.models?this.$route.query.models:"",sort_type:this.$route.query.sort_type?this.$route.query.sort_type:""};this.pagination.currentPage=parseInt(this.$route.query.page);this.axios.post("/v1/projects/get_elements_details?",s).then(e=>{this.result_details=e.data.result_details,this.distinct_models=e.data.distinct_models,this.distinct_elements=e.data.distinct_elements,this.pagination.count_all=parseInt(e.data.count_all)}).catch(function(e){console.log(e)})},onSubmit(){let e={};if(this.searchForm.element_selected.length>0){console.log(this.searchForm.element_selected),e.elements="";for(let t of this.searchForm.element_selected)e.elements+=t+"-"}this.searchForm.model_selected&&(e.models=this.searchForm.model_selected),this.searchForm.authors&&(e.authors=this.searchForm.authors),this.searchForm.keywords&&(e.keywords=this.searchForm.keywords),console.log(e),this.$router.push({path:"/elements_list",query:e})},reset(){this.$refs.searchForm.resetFields()},toProject(e){console.log(e.project_id);let{href:t}=this.$router.resolve({path:"/project_details",query:{project_id:e.project_id}});window.open(t,"_blank")},handleCurrentChange(e){let t={elements:this.$route.query.elements};t.page=e,this.$route.query.sort_type&&(t.sort_type=this.$route.query.sort_type),this.$route.query.models&&(t.models=this.$route.query.models),this.$route.query.authors&&(t.authors=this.$route.query.authors),this.$route.query.keywords&&(t.keywords=this.$route.query.keywords),console.log(t),this.$router.push({path:"/elements_list",query:t}).catch(e=>{console.log(e)})},availableFormat:(e,t)=>"0"===e.available?"":"Available",download(e){let t=e.replace("https://deeplibrary0.oss-cn-beijing.aliyuncs.com","");this.axios.get("/v1/user/get_token").then(e=>{if(console.log(t),console.log(e.data),"failed"==e.data.result)this.$confirm("Login for download","",{confirmButtonText:"Login",cancelButtonText:"Cancel",showClose:!0,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box"}).then(()=>{this.$router.push("/login")}).catch(()=>{});else if(0==this.$store.state.email_verify)this.$confirm("Please activate email before download!","",{confirmButtonText:"To Activate",cancelButtonText:"Cancel",showClose:!0,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box"}).then(()=>{this.$router.push("/user_info")}).catch(()=>{});else{let s=e.data.result;console.log(s);let o=Object(l.a)(s,t);console.log(o),window.location.href=o}}).catch(e=>{console.log(e)})},formatter:(e,t)=>e.update_time.split(" ")[0],sort(e){console.log(e);let t={sort_type:e};this.$route.query.elements&&(t.elements=this.$route.query.elements),this.$route.query.models&&(t.models=this.$route.query.models),this.$route.query.authors&&(t.authors=this.$route.query.authors),this.$route.query.keywords&&(t.keywords=this.$route.query.keywords),console.log(t),this.$router.push({path:"/elements_list",query:t}).catch(e=>{console.log(e)})}},components:{Header:o.a,Footer:r.a}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"element_list"}},[o("div",{staticClass:"header"},[o("Header",{attrs:{active:"elements_list"}})],1),e._v(" "),o("div",{staticClass:"form-row"},[o("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:!0,size:"mini"}},[o("el-row",{attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{prop:"element_selected"}},[o("el-select",{staticClass:"form-item",attrs:{multiple:"",filterable:"",placeholder:"Choose element...","popper-append-to-body":!1},model:{value:e.searchForm.element_selected,callback:function(t){e.$set(e.searchForm,"element_selected",t)},expression:"searchForm.element_selected"}},e._l(e.distinct_elements,function(e,t){return o("el-option",{key:"elements"+t,attrs:{label:e.elements,value:e.elements}})}),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{prop:"model_selected"}},[o("el-select",{staticClass:"form-item",attrs:{clearable:"",name:"models",placeholder:"Model version","popper-append-to-body":!1},model:{value:e.searchForm.model_selected,callback:function(t){e.$set(e.searchForm,"model_selected",t)},expression:"searchForm.model_selected"}},e._l(e.distinct_models,function(e,t){return o("el-option",{key:"models"+t,attrs:{value:e.version,label:e.version}})}),1)],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{prop:"authors"}},[o("el-input",{staticClass:"form-item",attrs:{id:"author-search",type:"text",placeholder:"Author: ",name:"authors"},model:{value:e.searchForm.authors,callback:function(t){e.$set(e.searchForm,"authors",t)},expression:"searchForm.authors"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("el-form-item",{attrs:{prop:"keywords"}},[o("el-input",{staticClass:"form-item",attrs:{id:"keywords-search",type:"text",placeholder:"Keywords: ",name:"keywords"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:3}},[o("el-button-group",[o("el-button",{staticClass:"form-item",staticStyle:{"background-color":"#ffffff",border:"0"},on:{click:e.onSubmit}},[o("i",{staticClass:"el-icon-search form-icon"})]),e._v(" "),o("el-button",{staticClass:"form-item",staticStyle:{"background-color":"#ffffff",border:"0"},on:{click:e.reset}},[o("i",{staticClass:"el-icon-close form-icon"})])],1)],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"center-panel"},[o("el-table",{staticClass:"list-table",attrs:{"cell-style":{},"header-cell-style":{"background-color":"#f3f3fe"},id:"table",data:e.result_details},on:{"row-click":e.toProject}},[o("el-table-column",{attrs:{align:"center",prop:"project_id","min-width":"12%"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("div",{staticStyle:{display:"flex"}},[e._v("\n                Project\n              ")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"elements",label:"Elements","min-width":"12%"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"authors",label:"Authors","min-width":"12%"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"keywords",label:"Keywords","min-width":"12%"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"models",label:"Model","min-width":"12%"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"Raw Data","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.data?o("el-popover",{attrs:{placement:"bottom-start",width:"300",trigger:"hover",content:"File size: "+(t.row.data_size/1024/1024).toFixed(3)+"M"}},[o("el-button",{attrs:{slot:"reference",round:"",type:"primary",size:"mini"},on:{click:function(s){return s.stopPropagation(),e.download(t.row.data)}},slot:"reference"},[o("img",{staticClass:"icon-img",attrs:{src:s("cfM6")}}),e._v(" "),o("span",{staticStyle:{"vertical-align":"middle"}},[e._v("Download")])])],1):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"downloads",label:"Downloads","min-width":"12%"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"update_time",formatter:e.formatter,"min-width":"16%"},scopedSlots:e._u([{key:"header",fn:function(t){return[o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("div",{staticClass:"sort-column",staticStyle:{display:"flex","align-items":"center"}},[e._v("\n                Update Time\n              ")]),e._v(" "),o("div",{staticClass:"sort-icon"},[o("i",{staticClass:"el-icon-caret-top top-icon",style:{color:-1==e.sort_type?"#33327e":"#abaabb"},on:{click:function(t){return e.sort(-1)}}}),e._v(" "),o("i",{staticClass:"el-icon-caret-bottom bottom-icon",style:{color:0==e.sort_type?"#33327e":"#abaabb"},on:{click:function(t){return e.sort(0)}}})])])]}}])})],1),e._v(" "),o("div",{staticClass:"pagination-block"},[o("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.pagination.count_all,background:""},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),o("Footer")],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(e){s("GyR5"),s("Dx6F")},"data-v-699f4ba3",null);t.default=n.exports}});