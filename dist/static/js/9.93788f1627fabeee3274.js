webpackJsonp([9],{"5EOz":function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=r("utbL"),o=r("teIl"),a=r("TVmP"),l={name:"ChangePassword",inject:["reload"],data(){return{changeForm:{oldPassword:"",newPassword:"",checkPass:"",slide:!1},rules:{oldPassword:[{required:!0,validator:(e,s,r)=>{console.log(s),s.length<6||s.length>36?r(new Error("Length between 6 and 36")):r()},trigger:"blur"}],newPassword:[{required:!0,validator:(e,s,r)=>{console.log(s),s.length<6||s.length>36?r(new Error("Length between 6 and 36")):(""!==this.changeForm.checkPass&&this.$refs.changeForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{required:!0,validator:(e,s,r)=>{console.log(s),""===s?r(new Error("Confirm password")):s!==this.changeForm.newPassword?r(new Error("Input same password")):r()},trigger:"blur"}],slide:[{required:!0,validator:(e,s,r)=>{s?r():(this.$alert("Check slide verfication","",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box",callback:e=>{}}),r(new Error("Slide Error")))},trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit"),!1;this.axios.post("v1/user/change_password",{new_password:this.changeForm.newPassword,old_password:this.changeForm.oldPassword}).then(e=>{console.log(e.data),1==e.data.result?this.$alert("Successfully",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-check",center:!0,customClass:"success-box",callback:e=>{this.$route.query.redirect?this.$router.push(this.$route.query.redirect):this.$router.push("home")}}):-2==e.data.result&&(console.log(e.data.result),this.$alert("Incorrect Password","",{confirmButtonText:"OK",showClose:!1,iconClass:"el-icon-circle-close",center:!0,customClass:"success-box",callback:e=>{this.reload()}}))}).catch(e=>{console.log(e)})})},resetForm(e){this.$refs[e].resetFields()},alert(e){console.log(e),"success"==e&&(this.changeForm.slide=!0)}},components:{Header:o.a,Verify:t.a,Footer:a.a}},c={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{attrs:{id:"change-password"}},[r("Header",{attrs:{active:"use3"}}),e._v(" "),r("div",{staticClass:"center-panel"},[r("el-row",[r("h2",{staticStyle:{"text-align":"center"}},[e._v("Change Password")])]),e._v(" "),r("el-form",{ref:"changeForm",attrs:{"status-icon":"",rules:e.rules,model:e.changeForm,"label-position":"left","label-width":"160px"}},[r("el-form-item",{attrs:{label:"Old Password",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.changeForm.oldPassword,callback:function(s){e.$set(e.changeForm,"oldPassword",s)},expression:"changeForm.oldPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"New Password",prop:"newPassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.changeForm.newPassword,callback:function(s){e.$set(e.changeForm,"newPassword",s)},expression:"changeForm.newPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Confirm",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changeForm.checkPass,callback:function(s){e.$set(e.changeForm,"checkPass",s)},expression:"changeForm.checkPass"}})],1),e._v(" "),r("el-form-item",{staticClass:"verify-row",attrs:{label:"Verification",prop:"slide"}},[r("Verify",{attrs:{explain:"Slide to right","show-button":!1,type:3,barSize:{width:"350px",height:"40px"}},on:{success:function(s){return e.alert("success")},error:function(s){return e.alert("error")}}})],1),e._v(" "),r("div",{staticClass:"bottom-row",staticStyle:{"text-align":"center"}},[r("el-button",{staticClass:"button-submit",attrs:{round:"",size:"small"},on:{click:function(s){return e.submitForm("changeForm")}}},[e._v("Submit")]),e._v(" "),r("el-button",{staticClass:"button-cancel",attrs:{round:"",size:"small"},on:{click:function(s){return e.resetForm("changeForm")}}},[e._v("Cancel")])],1)],1)],1),e._v(" "),r("Footer",{staticClass:"footer"})],1)},staticRenderFns:[]};var n=r("VU/8")(l,c,!1,function(e){r("pKFc"),r("E4fb")},"data-v-e2c456ba",null);s.default=n.exports},E4fb:function(e,s){},pKFc:function(e,s){}});